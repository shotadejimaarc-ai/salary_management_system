import streamlit as st
import graphviz

def main():

    st.title("ğŸ“• å ±é…¬ç®—å‡ºãƒ«ãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰")
    st.caption("çµ¦ä¸è¨ˆç®—ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ã€å…·ä½“ä¾‹ä»˜ãã§ã‚ã‹ã‚Šã‚„ã™ãè§£èª¬ã—ã¾ã™")

    st.markdown("---")

    # =========================================
    # STEP 1
    # =========================================
    with st.container():
        st.markdown("## ğŸŸ¦ STEP 1ï½œå£²ä¸Šã®åŸºæœ¬æ§‹é€ ")

        col1, col2 = st.columns(2)

        with col1:
            st.markdown("### ğŸ’° å£²ä¸Šé‡‘é¡")
            st.info("å®Ÿéš›ã®å£²ä¸Šã®åˆè¨ˆé‡‘é¡ï¼ˆå††ï¼‰")

        with col2:
            st.markdown("### ğŸ“Š å£²ä¸ŠF")
            st.info("å£²ä¸Šé‡‘é¡ Ã— ã‚«ãƒ†ã‚´ãƒªåˆ¥Fãƒ¬ãƒ¼ãƒˆ")

    st.markdown("---")

    # =========================================
    # STEP 2 å…·ä½“ä¾‹
    # =========================================
    st.markdown("## ğŸŸ¦ STEP 2ï½œå€‹äººå£²ä¸ŠFã®è¨ˆç®—ä¾‹")

    col1, col2, col3 = st.columns(3)

    col1.metric("ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³å£²ä¸Š", "500,000å††")
    col2.metric("Fãƒ¬ãƒ¼ãƒˆ", "50%")
    col3.metric("ç²å¾—F", "250,000F")

    st.markdown("")

    col1, col2, col3 = st.columns(3)

    col1.metric("ã‚­ãƒ£ã‚¹ãƒˆãƒ‰ãƒªãƒ³ã‚¯å£²ä¸Š", "200,000å††")
    col2.metric("Fãƒ¬ãƒ¼ãƒˆ", "30%")
    col3.metric("ç²å¾—F", "60,000F")

    st.success("âœ… å€‹äººå£²ä¸ŠF åˆè¨ˆï¼š310,000F")

    st.markdown("---")

    # =========================================
    # STEP 3 è¦ªå­æ§‹é€ 
    # =========================================
    st.markdown("## ğŸŸ¦ STEP 3ï½œè¦ªå­é–¢ä¿‚ã®åæ˜ ")

    st.write("### ã‚±ãƒ¼ã‚¹ï¼šè¦ªãŒ1äººã®å ´åˆ")

    col1, col2 = st.columns(2)

    col1.metric("è‡ªåˆ†ã®å€‹äººå£²ä¸ŠF", "310,000F")
    col2.metric("å­ã®å£²ä¸ŠF", "200,000F")

    st.success("çµ„ç¹”å£²ä¸ŠFï¼š510,000F")

    st.warning("â€» è¦ªãŒ2äººã„ã‚‹å ´åˆã¯å­ã®å£²ä¸ŠFã‚’50%ãšã¤åˆ†é…")

    st.markdown("---")

    # =========================================
    # è¦ªå­ãƒ„ãƒªãƒ¼å¯è¦–åŒ–
    # =========================================
    st.markdown("## ğŸŒ³ è¦ªå­æ§‹é€ ã®å›³è§£")

    st.caption("çµ„ç¹”å£²ä¸ŠFãŒã©ã®ã‚ˆã†ã«åŠ ç®—ã•ã‚Œã‚‹ã‹ã‚’è¦–è¦šçš„ã«è¡¨ç¾")

    parent_type = st.radio(
        "è¦ªã®äººæ•°ã‚’é¸æŠ",
        ["è¦ª1äººï¼ˆ100%åŠ ç®—ï¼‰", "è¦ª2äººï¼ˆ50%ãšã¤åˆ†é…ï¼‰"],
        horizontal=True
    )

    if parent_type == "è¦ª1äººï¼ˆ100%åŠ ç®—ï¼‰":

        dot = graphviz.Digraph()
        dot.attr(rankdir="TB")

        dot.node("Parent", "ğŸ‘‘ è¦ª\nå€‹äººå£²ä¸ŠF: 310,000F")
        dot.node("Child", "ğŸ§‘ å­\nå£²ä¸ŠF: 200,000F")

        dot.edge("Child", "Parent", label="100%åŠ ç®—")

        st.graphviz_chart(dot)

        st.success("çµ„ç¹”å£²ä¸ŠF = 310,000 + 200,000 = 510,000F")

    else:

        dot = graphviz.Digraph()
        dot.attr(rankdir="TB")

        dot.node("Parent1", "ğŸ‘‘ è¦ªA\nå€‹äººå£²ä¸ŠF: 310,000F")
        dot.node("Parent2", "ğŸ‘‘ è¦ªB\nå€‹äººå£²ä¸ŠF: 280,000F")
        dot.node("Child", "ğŸ§‘ å­\nå£²ä¸ŠF: 200,000F")

        dot.edge("Child", "Parent1", label="50%")
        dot.edge("Child", "Parent2", label="50%")

        st.graphviz_chart(dot)

        st.success("å­ã®200,000F â†’ 100,000Fãšã¤åˆ†é…")

        st.markdown("---")

    # =========================================
    # STEP 4 æ®µéšãƒ¬ãƒ¼ãƒˆ
    # =========================================
    st.markdown("## ğŸŸ¦ STEP 4ï½œå£²ä¸Šå ±é…¬ãƒ¬ãƒ¼ãƒˆé©ç”¨")

    st.markdown("""
    | çµ„ç¹”å£²ä¸ŠF | å ±é…¬ãƒ¬ãƒ¼ãƒˆ |
    |------------|------------|
    | 0ã€œ300,000F | 40% |
    | 300,000ã€œ500,000F | 45% |
    | 500,000Fä»¥ä¸Š | 50% |
    """)

    st.info("ä»Šå›ï¼š510,000F â†’ 50%é©ç”¨")

    st.metric("ğŸ¯ ç·æ”¯çµ¦é¡", "255,000å††")

    st.markdown("---")

    # =========================================
    # STEP 5 ãƒã‚¤ãƒˆ
    # =========================================
    st.markdown("## ğŸŸ¦ STEP 5ï½œãƒã‚¤ãƒˆçµ¦ä¸è¨ˆç®—")

    st.code("""
ç·æ”¯çµ¦é¡ ï¼ æ™‚çµ¦ Ã— ç¨¼åƒæ™‚é–“ + äº¤é€šè²»

ä¾‹ï¼š
1,200å†† Ã— 120æ™‚é–“ + 10,000å††
= 154,000å††
""")

    st.markdown("---")

    # =========================================
    # STEP 6 æ”¯æ‰•æ–¹æ³•
    # =========================================
    st.markdown("## ğŸŸ¦ STEP 6ï½œæ”¯æ‰•æ–¹æ³•")

    col1, col2, col3 = st.columns(3)

    col1.success("ğŸ’µ æ‰‹æ¸¡ã—\n\nå³æ™‚æ”¯çµ¦")
    col2.info("ğŸ¦ å£åº§æŒ¯è¾¼\n\néŠ€è¡ŒæŒ¯è¾¼")
    col3.warning("ğŸ“¦ ã‚¹ãƒˆãƒƒã‚¯\n\nç©ç«‹ç®¡ç†")

    st.markdown("---")

    # =========================================
    # ãƒ•ãƒ­ãƒ¼ã¾ã¨ã‚
    # =========================================
    st.markdown("## ğŸ§  è¨ˆç®—ãƒ•ãƒ­ãƒ¼ã¾ã¨ã‚")

    st.code("""
â‘  å£²ä¸Šé‡‘é¡é›†è¨ˆ
â‘¡ ã‚«ãƒ†ã‚´ãƒªåˆ¥Fè¨ˆç®— â†’ å€‹äººå£²ä¸ŠF
â‘¢ å­ã®å£²ä¸ŠFåˆ†é…
â‘£ çµ„ç¹”å£²ä¸ŠFç®—å‡º
â‘¤ æ®µéšå¼ãƒ¬ãƒ¼ãƒˆé©ç”¨
â‘¥ ç·æ”¯çµ¦é¡ç¢ºå®š
""")

    st.success("å€‹äººè©•ä¾¡ Ã— çµ„ç¹”è©•ä¾¡ã‚’ä¸¡ç«‹ã—ãŸçµ¦ä¸è¨­è¨ˆã§ã™ã€‚")